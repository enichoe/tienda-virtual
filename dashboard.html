<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1100">
        <div id="notification-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto">Notificaci贸n</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body"></div>
        </div>
    </div>

    <header class="bg-dark text-white p-3">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="h3">Panel de Administraci贸n</h1>
            <button id="logout-btn" class="btn btn-danger btn-sm">Cerrar Sesi贸n</button>
        </div>
    </header>

    <main class="container mt-4">
        <ul class="nav nav-tabs" id="admin-tabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="productos-tab" data-bs-toggle="tab" data-bs-target="#productos" type="button" role="tab">Productos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="usuarios-tab" data-bs-toggle="tab" data-bs-target="#usuarios" type="button" role="tab">Usuarios</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pedidos-tab" data-bs-toggle="tab" data-bs-target="#pedidos" type="button" role="tab">Pedidos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reportes-tab" data-bs-toggle="tab" data-bs-target="#reportes" type="button" role="tab">Reportes</button>
            </li>
        </ul>

        <div class="tab-content" id="admin-tabs-content">
            <div class="tab-pane fade show active" id="productos" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center my-3">
                    <h2>Gestionar Productos</h2>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#product-modal" id="add-product-btn">Agregar Producto</button>
                </div>
                <div id="dashboard-product-list" class="row row-cols-1 row-cols-md-3 g-4"></div>
            </div>
            <div class="tab-pane fade" id="usuarios" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center my-3">
                    <h2>Gestionar Usuarios</h2>
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#user-modal" id="add-user-btn">Agregar Usuario</button>
                </div>
                <div id="dashboard-user-list" class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="pedidos" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center my-3">
                    <h2>Gestionar Pedidos</h2>
                </div>
                <div id="dashboard-order-list" class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Usuario</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Fecha</th>
                                <th>Comprobante</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="reportes" role="tabpanel">
                <div class="d-flex justify-content-between align-items-center my-3">
                    <h2>Reportes</h2>
                </div>
                <div class="row g-3">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Reporte de Ventas</h5>
                                <button class="btn btn-info" id="sales-report-btn">Generar</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Reporte de Usuarios</h5>
                                <button class="btn btn-info" id="users-report-btn">Generar</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Reporte de Stock</h5>
                                <button class="btn btn-info" id="stock-report-btn">Generar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal de Producto -->
    <div class="modal fade" id="product-modal" tabindex="-1" aria-labelledby="product-modal-title" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="product-modal-title">Agregar Producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="product-form" enctype="multipart/form-data">
                        <input type="hidden" id="product-id" name="id">
                        <input type="hidden" id="product-imagen-url-existente" name="imagen_url_existente">
                        <div class="mb-3">
                            <label for="product-nombre" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="product-nombre" name="nombre" required>
                        </div>
                        <div class="mb-3">
                            <label for="product-descripcion" class="form-label">Descripci贸n</label>
                            <textarea class="form-control" id="product-descripcion" name="descripcion"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="product-precio" class="form-label">Precio</label>
                            <input type="number" class="form-control" id="product-precio" name="precio" step="0.01" required>
                        </div>
                        <div class="mb-3">
                            <label for="product-tipo" class="form-label">Tipo</label>
                            <input type="text" class="form-control" id="product-tipo" name="tipo" required>
                        </div>
                        <div class="mb-3">
                            <label for="product-marca" class="form-label">Marca</label>
                            <input type="text" class="form-control" id="product-marca" name="marca">
                        </div>
                        <div class="mb-3">
                            <label for="product-stock" class="form-label">Stock</label>
                            <input type="number" class="form-control" id="product-stock" name="stock" required>
                        </div>
                        <div class="mb-3">
                            <label for="product-imagen" class="form-label">Imagen</label>
                            <input type="file" class="form-control" id="product-imagen" name="imagen">
                        </div>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Usuario -->
    <div class="modal fade" id="user-modal" tabindex="-1" aria-labelledby="user-modal-title" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="user-modal-title">Agregar Usuario</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="user-form">
                        <input type="hidden" id="user-id">
                        <div class="mb-3">
                            <label for="user-nombre" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="user-nombre" required>
                        </div>
                        <div class="mb-3">
                            <label for="user-email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="user-email" required>
                        </div>
                        <div class="mb-3">
                            <label for="user-password" class="form-label">Contrase帽a</label>
                            <input type="password" class="form-control" id="user-password">
                            <small class="form-text text-muted">Dejar en blanco para no cambiar.</small>
                        </div>
                        <div class="mb-3">
                            <label for="user-rol" class="form-label">Rol</label>
                            <select class="form-select" id="user-rol" required>
                                <option value="user">Usuario</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmaci贸n -->
    <div class="modal fade" id="confirmation-modal" tabindex="-1" aria-labelledby="confirmation-modal-title" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmation-modal-title">Confirmar Acci贸n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    驴Est谩s seguro?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirm-delete-btn">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const App = {
            elements: {},
            data: {
                editingProductId: null,
                editingUserId: null,
                confirmCallback: null
            },

            init() {
                const token = localStorage.getItem('token');
                if (!token) {
                    window.location.href = '/login.html';
                    return;
                }
                
                try {
                    const payload = JSON.parse(atob(token.split('.')[1]));
                    this.data.userRole = payload.rol;
                } catch (e) {
                    console.error('Error decodificando el token:', e);
                    this.logout();
                    return;
                }

                this.cacheElements();
                this.addEventListeners();
                this.adjustUIForRole();
                this.fetchAndDisplayProducts();
            },

            cacheElements() {
                this.elements.productList = document.getElementById('dashboard-product-list');
                this.elements.userList = document.querySelector('#dashboard-user-list tbody');
                this.elements.orderList = document.querySelector('#dashboard-order-list tbody');
                
                this.elements.productModal = new bootstrap.Modal(document.getElementById('product-modal'));
                this.elements.productForm = document.getElementById('product-form');
                
                this.elements.userModal = new bootstrap.Modal(document.getElementById('user-modal'));
                this.elements.userForm = document.getElementById('user-form');

                this.elements.confirmationModal = new bootstrap.Modal(document.getElementById('confirmation-modal'));
                this.elements.confirmDeleteBtn = document.getElementById('confirm-delete-btn');

                this.elements.toast = new bootstrap.Toast(document.getElementById('notification-toast'));
                this.elements.toastBody = document.querySelector('#notification-toast .toast-body');
                
                this.elements.tabs = document.querySelectorAll('#admin-tabs .nav-link');
                this.elements.tabItems = document.querySelectorAll('#admin-tabs .nav-item');
            },

            addEventListeners() {
                document.getElementById('logout-btn').addEventListener('click', this.logout.bind(this));
                
                // Productos
                document.getElementById('add-product-btn').addEventListener('click', () => this.openProductModal());
                this.elements.productForm.addEventListener('submit', this.handleProductFormSubmit.bind(this));
                this.elements.productList.addEventListener('click', this.handleProductActions.bind(this));

                // Usuarios
                document.getElementById('add-user-btn').addEventListener('click', () => this.openUserModal());
                this.elements.userForm.addEventListener('submit', this.handleUserFormSubmit.bind(this));
                this.elements.userList.addEventListener('click', this.handleUserActions.bind(this));

                // Pedidos
                this.elements.orderList.addEventListener('click', this.handleOrderActions.bind(this));

                // Reportes
                document.getElementById('sales-report-btn').addEventListener('click', () => this.generateReport('sales'));
                document.getElementById('users-report-btn').addEventListener('click', () => this.generateReport('users'));
                document.getElementById('stock-report-btn').addEventListener('click', () => this.generateReport('stock'));

                // Pesta帽as
                this.elements.tabs.forEach(tab => {
                    tab.addEventListener('shown.bs.tab', (event) => {
                        const target = event.target.dataset.bsTarget;
                        if (target === '#productos') this.fetchAndDisplayProducts();
                        if (target === '#usuarios') this.fetchAndDisplayUsers();
                        if (target === '#pedidos') this.fetchAndDisplayOrders();
                    });
                });

                // Modal de confirmaci贸n
                this.elements.confirmDeleteBtn.addEventListener('click', () => {
                    if (this.data.confirmCallback) this.data.confirmCallback();
                    this.elements.confirmationModal.hide();
                });
            },

            async apiFetch(url, options = {}) {
                const token = localStorage.getItem('token');
                const defaultHeaders = {
                    'Authorization': `Bearer ${token}`
                };

                // No establecer Content-Type si se env铆a FormData (el navegador lo hace)
                if (!(options.body instanceof FormData)) {
                    defaultHeaders['Content-Type'] = 'application/json';
                }

                options.headers = { ...defaultHeaders, ...options.headers };

                const response = await fetch(url, options);

                if (response.status === 401 || response.status === 403) {
                    this.logout();
                    throw new Error('No autorizado');
                }
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'Error en la solicitud');
                }
                // Si la respuesta no tiene contenido (ej. DELETE), no intentar parsear JSON
                if (response.status === 204) {
                    return null;
                }
                return response.json();
            },

            showNotification(message, isError = false) {
                this.elements.toastBody.textContent = message;
                const toastEl = this.elements.toast._element;
                toastEl.classList.toggle('bg-danger', isError);
                toastEl.classList.toggle('bg-success', !isError);
                this.elements.toast.show();
            },

            logout() {
                localStorage.removeItem('token');
                window.location.href = '/login.html';
            },

            adjustUIForRole() {
                if (this.data.userRole === 'admin') {
                    // El admin ve todo, no se hace nada
                } else {
                    // El usuario normal solo ve productos
                    this.elements.tabItems.forEach(item => {
                        const tab = item.querySelector('button');
                        if (tab.id !== 'productos-tab') {
                            item.style.display = 'none';
                        }
                    });
                }
            },

            // --- L贸gica de Productos ---
            async fetchAndDisplayProducts() {
                try {
                    const products = await this.apiFetch('/api/admin/productos');
                    this.elements.productList.innerHTML = '';
                    products.forEach(p => {
                        const card = document.createElement('div');
                        card.className = 'col';
                        card.innerHTML = `
                            <div class="card h-100" data-id="${p.id}">
                                <img src="${p.imagen_url || 'https://via.placeholder.com/300'}" class="card-img-top" alt="${p.nombre}">
                                <div class="card-body">
                                    <h5 class="card-title">${p.nombre}</h5>
                                    <p class="card-text"><strong>Marca:</strong> ${p.marca || 'N/A'}</p>
                                    <p class="card-text"><strong>Stock:</strong> ${p.stock}</p>
                                    <p class="card-text fw-bold">S/.${parseFloat(p.precio).toFixed(2)}</p>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-warning btn-sm edit-product-btn">Editar</button>
                                    <button class="btn btn-danger btn-sm delete-product-btn">Eliminar</button>
                                </div>
                            </div>
                        `;
                        this.elements.productList.appendChild(card);
                    });
                } catch (error) {
                    this.showNotification('Error al cargar productos: ' + error.message, true);
                }
            },

            openProductModal(product = null) {
                this.elements.productForm.reset();
                if (product) {
                    this.data.editingProductId = product.id;
                    document.getElementById('product-modal-title').textContent = 'Editar Producto';
                    document.getElementById('product-id').value = product.id;
                    document.getElementById('product-nombre').value = product.nombre;
                    document.getElementById('product-descripcion').value = product.descripcion;
                    document.getElementById('product-precio').value = product.precio;
                    document.getElementById('product-tipo').value = product.tipo;
                    document.getElementById('product-marca').value = product.marca;
                    document.getElementById('product-stock').value = product.stock;
                    document.getElementById('product-imagen-url-existente').value = product.imagen_url;
                } else {
                    this.data.editingProductId = null;
                    document.getElementById('product-modal-title').textContent = 'Agregar Producto';
                }
                this.elements.productModal.show();
            },

            async handleProductFormSubmit(e) {
                e.preventDefault();
                const formData = new FormData(this.elements.productForm);
                const url = this.data.editingProductId 
                    ? `/api/admin/productos/${this.data.editingProductId}` 
                    : '/api/admin/productos';
                const method = this.data.editingProductId ? 'PUT' : 'POST';

                try {
                    await this.apiFetch(url, { method, body: formData });
                    this.showNotification(`Producto ${this.data.editingProductId ? 'actualizado' : 'agregado'} exitosamente.`);
                    this.elements.productModal.hide();
                    this.fetchAndDisplayProducts();
                } catch (error) {
                    this.showNotification('Error: ' + error.message, true);
                }
            },

            handleProductActions(e) {
                const card = e.target.closest('.card');
                if (!card) return;
                const productId = card.dataset.id;

                if (e.target.classList.contains('edit-product-btn')) {
                    this.apiFetch(`/api/productos/${productId}`)
                        .then(product => this.openProductModal(product[0])) // Asumiendo que la API p煤blica puede obtener un solo producto
                        .catch(err => this.showNotification('No se pudo cargar el producto para editar.', true));
                }
                if (e.target.classList.contains('delete-product-btn')) {
                    this.showConfirmation('驴Est谩s seguro de que quieres eliminar este producto?', async () => {
                        try {
                            await this.apiFetch(`/api/admin/productos/${productId}`, { method: 'DELETE' });
                            this.showNotification('Producto eliminado.');
                            this.fetchAndDisplayProducts();
                        } catch (error) {
                            this.showNotification('Error al eliminar: ' + error.message, true);
                        }
                    });
                }
            },

            // --- L贸gica de Usuarios ---
            async fetchAndDisplayUsers() {
                try {
                    const users = await this.apiFetch('/api/admin/usuarios');
                    this.elements.userList.innerHTML = '';
                    users.forEach(user => {
                        const row = document.createElement('tr');
                        row.dataset.id = user.id;
                        row.innerHTML = `
                            <td>${user.id}</td>
                            <td>${user.nombre}</td>
                            <td>${user.email}</td>
                            <td>${user.rol}</td>
                            <td>
                                <button class="btn btn-warning btn-sm edit-user-btn">Editar</button>
                                <button class="btn btn-danger btn-sm delete-user-btn">Eliminar</button>
                            </td>
                        `;
                        this.elements.userList.appendChild(row);
                    });
                } catch (error) {
                    this.showNotification('Error al cargar usuarios: ' + error.message, true);
                }
            },
            
            openUserModal(user = null) {
                this.elements.userForm.reset();
                document.getElementById('user-password').required = !user;
                if (user) {
                    this.data.editingUserId = user.id;
                    document.getElementById('user-modal-title').textContent = 'Editar Usuario';
                    document.getElementById('user-id').value = user.id;
                    document.getElementById('user-nombre').value = user.nombre;
                    document.getElementById('user-email').value = user.email;
                    document.getElementById('user-rol').value = user.rol;
                } else {
                    this.data.editingUserId = null;
                    document.getElementById('user-modal-title').textContent = 'Agregar Usuario';
                }
                this.elements.userModal.show();
            },

            async handleUserFormSubmit(e) {
                e.preventDefault();
                const id = this.data.editingUserId;
                const data = {
                    nombre: document.getElementById('user-nombre').value,
                    email: document.getElementById('user-email').value,
                    rol: document.getElementById('user-rol').value,
                    password: document.getElementById('user-password').value
                };
                if (!data.password) delete data.password; // No enviar contrase帽a si est谩 vac铆a

                const url = id ? `/api/admin/usuarios/${id}` : '/api/admin/usuarios';
                const method = id ? 'PUT' : 'POST';

                try {
                    await this.apiFetch(url, { method, body: JSON.stringify(data) });
                    this.showNotification(`Usuario ${id ? 'actualizado' : 'creado'} exitosamente.`);
                    this.elements.userModal.hide();
                    this.fetchAndDisplayUsers();
                } catch (error) {
                    this.showNotification('Error: ' + error.message, true);
                }
            },

            handleUserActions(e) {
                const row = e.target.closest('tr');
                if (!row) return;
                const userId = row.dataset.id;

                if (e.target.classList.contains('edit-user-btn')) {
                    const user = {
                        id: userId,
                        nombre: row.cells[1].textContent,
                        email: row.cells[2].textContent,
                        rol: row.cells[3].textContent,
                    };
                    this.openUserModal(user);
                }
                if (e.target.classList.contains('delete-user-btn')) {
                    this.showConfirmation('驴Est谩s seguro de que quieres eliminar este usuario?', async () => {
                        try {
                            await this.apiFetch(`/api/admin/usuarios/${userId}`, { method: 'DELETE' });
                            this.showNotification('Usuario eliminado.');
                            this.fetchAndDisplayUsers();
                        } catch (error) {
                            this.showNotification('Error al eliminar: ' + error.message, true);
                        }
                    });
                }
            },

            // --- L贸gica de Pedidos ---
            async fetchAndDisplayOrders() {
                try {
                    const orders = await this.apiFetch('/api/admin/pedidos');
                    this.elements.orderList.innerHTML = '';
                    orders.forEach(order => {
                        const row = document.createElement('tr');
                        row.dataset.id = order.id;
                        row.innerHTML = `
                            <td>${order.id}</td>
                            <td>${order.usuario_nombre} (${order.usuario_email})</td>
                            <td>S/.${parseFloat(order.total).toFixed(2)}</td>
                            <td><span class="badge bg-info text-dark">${order.estado}</span></td>
                            <td>${new Date(order.created_at).toLocaleString()}</td>
                            <td><a href="${order.comprobante_url}" target="_blank" class="btn btn-sm btn-secondary">Ver</a></td>
                            <td>
                                <select class="form-select form-select-sm update-status">
                                    <option value="pendiente" ${order.estado === 'pendiente' ? 'selected' : ''}>Pendiente</option>
                                    <option value="procesando" ${order.estado === 'procesando' ? 'selected' : ''}>Procesando</option>
                                    <option value="enviado" ${order.estado === 'enviado' ? 'selected' : ''}>Enviado</option>
                                    <option value="completado" ${order.estado === 'completado' ? 'selected' : ''}>Completado</option>
                                    <option value="cancelado" ${order.estado === 'cancelado' ? 'selected' : ''}>Cancelado</option>
                                </select>
                            </td>
                        `;
                        this.elements.orderList.appendChild(row);
                    });
                } catch (error) {
                    this.showNotification('Error al cargar pedidos: ' + error.message, true);
                }
            },

            async handleOrderActions(e) {
                if (e.target.classList.contains('update-status')) {
                    const orderId = e.target.closest('tr').dataset.id;
                    const newStatus = e.target.value;
                    try {
                        await this.apiFetch(`/api/admin/pedidos/${orderId}`, {
                            method: 'PUT',
                            body: JSON.stringify({ estado: newStatus })
                        });
                        this.showNotification('Estado del pedido actualizado.');
                        this.fetchAndDisplayOrders();
                    } catch (error) {
                        this.showNotification('Error al actualizar estado: ' + error.message, true);
                    }
                }
            },

            // --- L贸gica de Reportes ---
            async generateReport(type) {
                try {
                    const token = localStorage.getItem('token');
                    const response = await fetch(`/api/admin/reportes/${type}`, {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    if (!response.ok) {
                        const err = await response.json();
                        throw new Error(err.message || 'No se pudo generar el reporte.');
                    }

                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    
                    // Obtener el nombre del archivo desde la respuesta del servidor
                    const contentDisposition = response.headers.get('content-disposition');
                    let filename = `${type}_report.pdf`;
                    if (contentDisposition) {
                        const filenameMatch = contentDisposition.match(/filename="?(.+)"?/);
                        if (filenameMatch.length > 1) {
                            filename = filenameMatch[1];
                        }
                    }
                    a.download = filename;

                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                    a.remove();
                    this.showNotification('Reporte generado exitosamente.');
                } catch (error) {
                    this.showNotification('Error al generar reporte: ' + error.message, true);
                }
            },

            showConfirmation(message, callback) {
                document.querySelector('#confirmation-modal .modal-body').textContent = message;
                this.data.confirmCallback = callback;
                this.elements.confirmationModal.show();
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>
